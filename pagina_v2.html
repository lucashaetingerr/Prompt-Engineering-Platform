<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Prompt Engineering • Trilha Guiada</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Material+Symbols+Rounded:FILL@0..1"
    rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='128' height='128' viewBox='0 0 256 256'%3E%3Crect width='256' height='256' rx='56' fill='%23ffffff'/%3E%3Crect x='60' y='70' width='136' height='104' rx='18' fill='%232563eb'/%3E%3Cpath d='M88 116h80' stroke='%23ffffff' stroke-width='8' stroke-linecap='round'/%3E%3Cpath d='M88 132h52' stroke='%23bfdbfe' stroke-width='6' stroke-linecap='round'/%3E%3Ccircle cx='96' cy='96' r='6' fill='%23bfdbfe'/%3E%3Ccircle cx='116' cy='96' r='6' fill='%23bfdbfe'/%3E%3Ccircle cx='136' cy='96' r='6' fill='%23bfdbfe'/%3E%3C/svg%3E">

  <style>
    :root {
      --bg: #ffffff;
      --bg-soft: #f6f9fc;
      --panel: #ffffff;
      --panel-2: #fbfeff;
      --text: #0f172a;
      --muted: #475569;
      --brand: #2563eb;
      --brand-2: #16a34a;
      --border: #e5e7eb;
      --code-bg: #0f172a;
      --shadow: 0 8px 24px rgba(2, 8, 23, .07);
      --radius: 16px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      background: linear-gradient(180deg, var(--bg) 0%, var(--bg-soft) 100%);
      color: var(--text);
      font: 400 16px/1.6 "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Noto Sans", "Helvetica Neue", Arial;
    }

    .material-symbols-rounded {
      font-family: "Material Symbols Rounded";
      font-weight: normal;
      font-style: normal;
      font-size: 20px;
      display: inline-block;
      line-height: 1;
      -webkit-font-smoothing: antialiased;
    }

    /* HEADER – mais chamativo, com gradiente forte e ainda com fade */

    header.navbar{
      position:sticky;
      top:0;
      z-index:1000;
      backdrop-filter:saturate(1.1) blur(10px);
      background:linear-gradient(90deg,#0c1118 0%,#192334 50%,#0c1118 100%);
      border-bottom:1px solid rgba(15,23,42,.5);
      display:flex;
      align-items:center;
      gap:16px;
      padding:10px 18px;
      color:#e5e7eb;
      box-shadow:0 10px 30px rgba(15,23,42,.35)
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
    }

    .brand .logo {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 30px;
      height: 30px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 0% 0%, #22c55e 0%, #bbf7d0 30%, transparent 60%),
        radial-gradient(circle at 100% 100%, #38bdf8 0%, #bfdbfe 30%, transparent 60%),
        linear-gradient(135deg, #1d4ed8, #0ea5e9);
      box-shadow: 0 4px 14px rgba(15, 23, 42, 0.45);
    }

    .brand .logo i {
      width: 16px;
      height: 16px;
      border-radius: 6px;
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(148, 163, 184, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      color: #2563eb;
    }

    .brand .logo i::before {
      content: ">";
    }

    .brand strong {
      color: #f9fafb;
      font-size: 15px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .nav-spacer {
      flex: 1;
    }

    .progress {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 13px;
      color: #e5e7eb;
      white-space: nowrap;
    }

    .bar {
      width: 180px;
      height: 8px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.35);
      border: 1px solid rgba(15, 23, 42, 0.45);
      overflow: hidden;
    }

    .bar > i {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e 50%);
      border-radius: 9px;
      transition: width .3s ease;
    }

    .about-btn {
      border: none;
      background: rgba(15, 23, 42, 0.16);
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      color: #e5e7eb;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-right: 8px;
      box-shadow: 0 2px 8px rgba(15, 23, 42, 0.45);
      transition: background .15s ease, box-shadow .15s ease, transform .08s ease;
    }

    .about-btn:hover {
      background: rgba(15, 23, 42, 0.28);
      box-shadow: 0 4px 14px rgba(15, 23, 42, 0.6);
      transform: translateY(-1px);
    }

    .lang-toggle {
      display: flex;
      align-items: center;
      gap: 4px;
      background: rgba(15, 23, 42, 0.22);
      padding: 2px;
      border-radius: 999px;
      margin-right: 12px;
    }

    .lang-btn {
      border: none;
      background: transparent;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      color: #e5e7eb;
      cursor: pointer;
    }

    .lang-btn.active {
      background: #ffffff;
      color: var(--brand);
      box-shadow: 0 1px 4px rgba(15, 23, 42, .35);
    }

    .wrap {
      width: 100%;
      max-width: none;
      margin: 0 auto;
      height: calc(100vh - 64px);
    }

    .grid {
      display: grid;
      height: 100%;
      grid-template-columns: 240px 1fr;
      gap: 0;
    }

    aside.sidebar {
      position: relative;
      background: var(--panel);
      border-right: 1px solid var(--border);
      border-radius: 0;
      box-shadow: none;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .side-head {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px;
      border-bottom: 1px solid var(--border);
    }

    .side-head .material-symbols-rounded {
      color: var(--brand);
    }

    .topics {
      overflow: auto;
      padding: 6px;
      margin: 0;
      height: 100%;
    }

    .topic {
      list-style: none;
    }

    .topic button {
      width: 100%;
      text-align: left;
      background: transparent;
      border: 0;
      border-radius: 12px;
      padding: 10px 12px;
      cursor: pointer;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      color: var(--text);
    }

    .topic button:hover {
      background: #f3f4f6;
    }

    .topic button.active {
      background: #e6f2ff;
      border-left: 3px solid var(--brand);
    }

    .topic button.locked {
      opacity: .5;
      cursor: not-allowed;
    }

    .topic .icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 22px;
    }

    .topic .title {
      font-weight: 600;
    }

    .topic small {
      display: block;
      color: var(--muted);
      font-size: 12px;
      margin-top: 2px;
    }

    .badge-done {
      color: #16a34a;
    }

    section.card {
      background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
      border-left: 1px solid var(--border);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .card-head {
      padding: 14px 18px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 12px;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .lesson-title {
      font-size: clamp(18px, 2.2vw, 26px);
      font-weight: 700;
    }

    .lesson-meta {
      color: var(--muted);
      font-size: 13px;
    }

    .content {
      padding: clamp(16px, 3vw, 28px);
      overflow: auto;
      height: 100%;
    }

    .content p {
      margin: 0 0 14px;
    }

    .content ul,
    .content ol {
      margin: 0 0 14px 20px;
    }

    .content pre {
      background: var(--code-bg);
      color: #e5e7eb;
      border: 1px solid #0b1220;
      border-radius: 12px;
      padding: 14px 16px;
      white-space: pre-wrap;
      word-break: break-word;
      overflow-x: hidden;
    }

    .tip {
      border-left: 4px solid var(--brand);
      background: #eef6ff;
      padding: 12px 14px;
      border-radius: 10px;
      color: #0b294e;
      margin: 12px 0 18px;
    }

    .foot {
      display: flex;
      gap: 12px;
      justify-content: space-between;
      align-items: center;
      margin-top: auto;
      padding: 12px 16px;
      border-top: 1px solid var(--border);
      background: #fff;
      /* espaço pro footer fixo sem ficar exagerado */
      margin-bottom: 40px;
    }

    .hint {
      color: var(--muted);
      font-size: 13px;
      display: flex;
      align-items: flex-start;
      gap: 6px;
    }

    .hint-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    #keyboardHint {
      font-size: 12px;
      opacity: 0.9;
    }

    .btn-row {
      display: flex;
      gap: 10px;
    }

    .btn {
      appearance: none;
      border: 1px solid var(--border);
      background: #ffffff;
      color: var(--text);
      padding: 12px 16px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
      box-shadow: var(--shadow);
      user-select: none;
      display: inline-flex;
      gap: 8px;
      align-items: center;
    }

    .btn.brand {
      --glow: 0 10px 28px rgba(37, 99, 235, .38), 0 16px 42px rgba(22, 163, 74, .28);
      background: radial-gradient(140% 140% at 10% 10%, rgba(37, 99, 235, .15), transparent 40%), linear-gradient(90deg, var(--brand) 0%, var(--brand-2) 100%);
      color: #ffffff;
      border: none;
      padding: 16px 24px;
      border-radius: 999px;
      font-size: 17px;
      box-shadow: var(--glow);
    }

    .btn.brand:disabled {
      opacity: .6;
      box-shadow: none;
      cursor: not-allowed;
    }

    .btn:active {
      transform: translateY(1px);
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(15, 23, 42, .6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      transition: opacity .3s ease;
      pointer-events: none;
    }

    .modal-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-content {
      background: var(--panel);
      padding: 28px 32px;
      border-radius: var(--radius);
      box-shadow: 0 10px 30px rgba(0, 0, 0, .1);
      width: 90%;
      max-width: 550px;
      position: relative;
      transform: scale(.95);
      transition: transform .3s ease;
    }

    .modal-overlay.visible .modal-content {
      transform: scale(1);
    }

    .modal-content h2 {
      margin: 0 0 12px;
      color: var(--brand);
      font-size: 24px;
    }

    .modal-content h3 {
      margin: 20px 0 8px;
      font-size: 16px;
    }

    .modal-content ul {
      padding-left: 20px;
    }

    .modal-content li {
      margin-bottom: 6px;
    }

    .modal-close {
      position: absolute;
      top: 10px;
      right: 14px;
      background: transparent;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: var(--muted);
    }

    .modal-close:hover {
      color: var(--text);
    }

    /* Footer fixo, mais baixo e discreto */

    .site-footer {
      border-top: 1px solid #e5e7eb;
      background: rgba(248, 250, 252, 0.96);
      backdrop-filter: blur(8px);
      padding: 4px 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      z-index: 900;
      box-shadow: 0 -3px 8px rgba(15, 23, 42, 0.06);
    }

    .footer-inner {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      max-width: 480px;
      width: 100%;
      font-size: 11px;
      color: var(--muted);
    }

    .footer-links {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      width: 100%;
    }

    .footer-link {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      text-decoration: none;
      color: var(--muted);
      font-weight: 600;
      transition: color .15s ease, transform .1s ease;
      font-size: 11px;
    }

    .footer-link:hover {
      color: #111827;
      transform: translateY(-1px);
    }

    .footer-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 14px;
      height: 14px;
    }

    .footer-icon svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    @media (max-width:980px) {
      .grid {
        grid-template-columns: 210px 1fr;
      }

      .bar {
        width: 150px;
      }
    }

    @media (max-width:760px) {
      .grid {
        grid-template-columns: 1fr;
      }

      aside.sidebar {
        order: 1;
        border-right: none;
        border-bottom: 1px solid var(--border);
      }

      section.card {
        order: 2;
      }

      .bar {
        width: 120px;
      }
    }
  </style>
</head>

<body>
<header class="navbar">
  <div class="brand">
    <div class="logo"><i></i></div>
    <strong>Prompt Engineering</strong>
  </div>
  <div class="nav-spacer"></div>

  <button type="button" class="about-btn" id="aboutBtn">
    <span class="material-symbols-rounded">info</span>
    <span id="aboutLabel">Sobre</span>
  </button>

  <div class="lang-toggle" aria-label="Idioma">
    <button type="button" class="lang-btn active" data-lang="pt">PT</button>
    <button type="button" class="lang-btn" data-lang="en">EN</button>
  </div>

  <div class="progress" aria-live="polite">
    <div class="bar" aria-hidden="true"><i id="barFill"></i></div>
    <span id="progressText">0/0</span>
  </div>
</header>

<main class="wrap">
  <div class="grid">
    <aside class="sidebar" aria-label="Tópicos">
      <div class="side-head">
        <span class="material-symbols-rounded">menu_book</span>
        <strong id="modulesLabel">Módulos</strong>
      </div>
      <ul class="topics" id="topicsList"></ul>
    </aside>
    <section class="card" aria-labelledby="lessonTitle">
      <div class="card-head">
        <div class="lesson-title" id="lessonTitle">Carregando…</div>
        <div class="lesson-meta" id="lessonMeta">Use ←/→ para navegar</div>
      </div>
      <article class="content" id="lessonContent"></article>
      <div class="foot">
        <div class="hint">
          <span class="material-symbols-rounded">schedule</span>
          <div class="hint-text">
            <span id="gateHint">Fique 10s nesta lição para desbloquear a próxima</span>
            <div id="keyboardHint">Você também pode usar ←/→ no teclado para voltar e avançar.</div>
          </div>
        </div>
        <div class="btn-row">
          <button id="prevBtn" class="btn" type="button">
            <span class="material-symbols-rounded">arrow_back</span><span id="prevLabel">Voltar</span>
          </button>
          <button id="nextBtn" class="btn brand" type="button">
            <span id="nextLabel">Avançar</span>
          </button>
        </div>
      </div>
    </section>
  </div>
</main>

<!-- Modal de conclusão -->
<div id="completionModal" class="modal-overlay">
  <div class="modal-content">
    <button id="closeModalBtn" class="modal-close" aria-label="Fechar">&times;</button>
    <h2 id="completionTitle"></h2>
    <div id="completionBody"></div>
  </div>
</div>

<!-- Modal de introdução / sobre -->
<div id="introModal" class="modal-overlay">
  <div class="modal-content">
    <h2 id="introTitle"></h2>
    <div id="introBody"></div>
    <button id="introStartBtn" class="btn brand" type="button"></button>
  </div>
</div>

<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-links">
      <a class="footer-link" href="https://github.com/lucashaetingerr" target="_blank" rel="noopener noreferrer">
        <span class="footer-icon">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor"
                  d="M12 2C6.48 2 2 6.58 2 12.26c0 4.51 2.87 8.33 6.84 9.68.5.1.68-.22.68-.49 0-.24-.01-.87-.01-1.71-2.78.62-3.37-1.37-3.37-1.37-.45-1.18-1.1-1.5-1.1-1.5-.9-.63.07-.62.07-.62 1 .07 1.53 1.06 1.53 1.06.89 1.55 2.34 1.1 2.91.84.09-.66.35-1.1.63-1.35-2.22-.26-4.55-1.14-4.55-5.09 0-1.13.39-2.06 1.03-2.79-.1-.26-.45-1.3.1-2.7 0 0 .84-.27 2.75 1.06A9.18 9.18 0 0 1 12 6.07c.85 0 1.71.12 2.51.34 1.9-1.33 2.74-1.06 2.74-1.06.55 1.4.2 2.44.1 2.7.64.73 1.03 1.66 1.03 2.79 0 3.96-2.34 4.82-4.57 5.08.36.32.68.94.68 1.9 0 1.37-.01 2.47-.01 2.81 0 .27.18.59.69.49A10.02 10.02 0 0 0 22 12.26C22 6.58 17.52 2 12 2Z" />
          </svg>
        </span>
        <span id="footerGithubLabel">@lucashaetingerr</span>
      </a>
      <a class="footer-link" href="https://www.linkedin.com/in/lucas-roberto-haetinger-952332214/"
         target="_blank" rel="noopener noreferrer">
        <span class="footer-icon">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor"
                  d="M4.98 3.5C4.98 4.88 3.9 6 2.5 6 1.12 6 0 4.88 0 3.5 0 2.12 1.12 1 2.5 1 3.9 1 4.98 2.12 4.98 3.5zM.24 8.25h4.52V23H.24V8.25zM8.34 8.25h4.34v2h.06c.6-1.14 2.06-2.34 4.24-2.34 4.54 0 5.38 2.99 5.38 6.88V23h-4.52v-7.08c0-1.69-.03-3.88-2.37-3.88-2.37 0-2.73 1.85-2.73 3.76V23H8.34V8.25z" />
          </svg>
        </span>
        <span id="footerLinkedinLabel">LinkedIn</span>
      </a>
    </div>
  </div>
</footer>

<script>
  const titleEl = document.getElementById('lessonTitle');
  const metaEl = document.getElementById('lessonMeta');
  const contentEl = document.getElementById('lessonContent');
  const barFill = document.getElementById('barFill');
  const progressText = document.getElementById('progressText');
  const prevBtn = document.getElementById('prevBtn');
  const prevLabelEl = document.getElementById('prevLabel');
  const nextBtn = document.getElementById('nextBtn');
  const nextLabel = document.getElementById('nextLabel');
  const gateHint = document.getElementById('gateHint');
  const keyboardHintEl = document.getElementById('keyboardHint');
  const topicsList = document.getElementById('topicsList');
  const completionModal = document.getElementById('completionModal');
  const closeModalBtn = document.getElementById('closeModalBtn');
  const langButtons = document.querySelectorAll('.lang-btn');
  const introModal = document.getElementById('introModal');
  const introStartBtn = document.getElementById('introStartBtn');
  const aboutBtn = document.getElementById('aboutBtn');
  const aboutLabel = document.getElementById('aboutLabel');
  const introTitleEl = document.getElementById('introTitle');
  const introBodyEl = document.getElementById('introBody');
  const completionTitleEl = document.getElementById('completionTitle');
  const completionBodyEl = document.getElementById('completionBody');
  const modulesLabelEl = document.getElementById('modulesLabel');
  const footerGithubLabelEl = document.getElementById('footerGithubLabel');
  const footerLinkedinLabelEl = document.getElementById('footerLinkedinLabel');

  const STORAGE_NS = 'pe_trilha_v4';
  const LS = {
    idx: STORAGE_NS + ':idx',
    visited: STORAGE_NS + ':visited',
    unlocked: STORAGE_NS + ':unlocked',
    introSeen: STORAGE_NS + ':introSeen'
  };

  const STRINGS = {
    pt: {
      pageTitle: 'Prompt Engineering • Trilha Guiada',
      aboutButton: 'Sobre',
      metaNav: 'Use ←/→ para navegar',
      modulesLabel: 'Módulos',
      prevLabel: 'Voltar',
      nextAdvance: 'Avançar',
      nextFinish: 'Finalizar',
      hintLockedAdvance: (s) => `Fique ${s}s nesta lição para desbloquear`,
      hintUnlockedAdvance: 'Você pode avançar',
      hintLockedFinish: (s) => `Fique ${s}s nesta lição para desbloquear`,
      hintUnlockedFinish: 'Você pode finalizar',
      keyboardHint: 'Você também pode usar ←/→ no teclado para voltar e avançar.',
      footerGithubLabel: '@lucashaetingerr',
      footerLinkedinLabel: 'LinkedIn',
      introTitle: 'Bem-vindo à Trilha de Prompt Engineering',
      introBody: `
        <p>Esta plataforma é uma trilha guiada para você aprender, na prática, a criar prompts mais claros,
        estruturados e eficientes para modelos de IA generativa.</p>
        <h3>O que você vai encontrar aqui</h3>
        <ul>
          <li>Uma sequência de módulos curtos explicando conceitos-chave de Prompt Engineering.</li>
          <li>Exemplos práticos de prompts que você pode adaptar para o seu dia a dia.</li>
          <li>Navegação passo a passo, com desbloqueio gradual para incentivar uma progressão organizada.</li>
        </ul>
        <h3>Como funciona</h3>
        <ul>
          <li>A plataforma usa a <strong>memória do seu navegador</strong> (localStorage) para registrar os módulos já acessados e o seu progresso.</li>
          <li>Você <strong>não precisa criar conta</strong>, fazer login ou informar dados pessoais: tudo fica salvo apenas no seu próprio navegador.</li>
          <li>Se quiser recomeçar do zero, basta limpar os dados do site nas configurações do navegador.</li>
        </ul>
        <p>Esta trilha foi desenvolvida por <strong>Lucas Haetinger (@lucashaetingerr)</strong>, com foco em uma experiência simples,
        didática e segura para quem quer aprender a conversar melhor com modelos de IA.</p>
      `,
      introStartReady: 'Começar agora',
      introStartWait: (s) => `Começar em ${s}s`,
      completionTitle: 'Parabéns! Você concluiu a trilha!',
      completionBody: `
        <p>Você finalizou todos os módulos de Prompt Engineering e agora possui uma base sólida para criar instruções
        claras, eficazes e seguras para modelos de linguagem.</p>
        <h3>Como aplicar o que você aprendeu:</h3>
        <ul>
          <li><strong>Pratique o método CANI:</strong> antes de escrever um prompt, pense sempre em:
          <strong>C</strong>ontexto, <strong>A</strong>ção, <strong>N</strong>ormas e
          <strong>I</strong>nspeção. Essa estrutura simples organiza o raciocínio.</li>
          <li><strong>Teste e itere:</strong> trate seus prompts como um software. A primeira versão raramente é a melhor.
          Monitore os resultados, ajuste uma variável por vez e meça o impacto.</li>
          <li><strong>Seja específico:</strong> ambiguidade é inimiga de bons resultados. Defina formatos de saída
          (como JSON), imponha restrições (contagem de palavras, tom) e forneça exemplos (few-shot) para guiar o modelo.</li>
        </ul>
        <p>Continue explorando e aplicando estes conceitos para extrair o máximo potencial das ferramentas de IA
        generativa.</p>
      `
    },
    en: {
      pageTitle: 'Prompt Engineering • Guided Track',
      aboutButton: 'About',
      metaNav: 'Use ←/→ to navigate',
      modulesLabel: 'Modules',
      prevLabel: 'Back',
      nextAdvance: 'Next',
      nextFinish: 'Finish',
      hintLockedAdvance: (s) => `Stay ${s}s on this lesson to unlock`,
      hintUnlockedAdvance: 'You can go next',
      hintLockedFinish: (s) => `Stay ${s}s on this lesson to unlock`,
      hintUnlockedFinish: 'You can finish',
      keyboardHint: 'You can also use ←/→ on your keyboard to go back and forward.',
      footerGithubLabel: '@lucashaetingerr',
      footerLinkedinLabel: 'LinkedIn',
      introTitle: 'Welcome to the Prompt Engineering Track',
      introBody: `
        <p>This platform is a guided path to help you learn, in practice, how to create clearer,
        more structured and more effective prompts for generative AI models.</p>
        <h3>What you will find here</h3>
        <ul>
          <li>A sequence of short modules explaining key Prompt Engineering concepts.</li>
          <li>Practical prompt examples that you can adapt to your daily work.</li>
          <li>Step-by-step navigation, with gradual unlocking to encourage structured progress.</li>
        </ul>
        <h3>How it works</h3>
        <ul>
          <li>The platform uses your browser <strong>local storage</strong> to track which modules you have already visited and your progress.</li>
          <li>You <strong>do not need an account</strong>, login, or personal data: everything is stored only in your own browser.</li>
          <li>If you want to restart from scratch, just clear this site’s data in your browser settings.</li>
        </ul>
        <p>This track was created by <strong>Lucas Haetinger (@lucashaetingerr)</strong>, focusing on a simple,
        didactic and safe experience for anyone who wants to learn how to talk better with AI models.</p>
      `,
      introStartReady: 'Start now',
      introStartWait: (s) => `Start in ${s}s`,
      completionTitle: 'Congrats! You\'ve completed the track!',
      completionBody: `
        <p>You have finished all Prompt Engineering modules and now have a solid foundation to create clear,
        effective and safe instructions for language models.</p>
        <h3>How to apply what you learned:</h3>
        <ul>
          <li><strong>Practice the CANI method:</strong> before writing a prompt, always think about:
          <strong>Context</strong>, <strong>Action</strong>, <strong>Norms</strong> and
          <strong>Inspection</strong>. This simple structure organizes your reasoning.</li>
          <li><strong>Test and iterate:</strong> treat your prompts like software. The first version is rarely the best.
          Monitor outputs, change one variable at a time and measure the impact.</li>
          <li><strong>Be specific:</strong> ambiguity kills quality. Define output formats (such as JSON), add constraints
          (word count, tone) and provide examples (few-shot) to guide the model.</li>
        </ul>
        <p>Keep exploring and applying these ideas to unlock the full potential of generative AI tools.</p>
      `
    }
  };

  let idx = 0;
  let visited = [];
  let lastUnlocked = 0;
  let gateTimer = null;
  const requiredSeconds = 10;

  let totalLessons = 0;
  const conteudos = { pt: null, en: null };
  let currentLang = 'pt';

  let currentGateDisabled = true;
  let currentGateRemaining = requiredSeconds;

  const INTRO_REQUIRED_SECONDS = 10;
  let introTimer = null;
  let introCanClose = false;
  let introRemaining = INTRO_REQUIRED_SECONDS;

  function getConteudos() {
    return conteudos[currentLang] || [];
  }

  const isLastLesson = () => totalLessons > 0 && idx === totalLessons - 1;

  function clamp(i) {
    return Math.max(0, Math.min(totalLessons - 1, i));
  }

  function saveState() {
    try {
      localStorage.setItem(LS.idx, String(idx));
      localStorage.setItem(LS.visited, JSON.stringify(visited));
      localStorage.setItem(LS.unlocked, String(lastUnlocked));
    } catch { }
  }

  function loadState() {
    let storedVisited = null;
    try {
      const i = parseInt(localStorage.getItem(LS.idx) || '0', 10);
      const vRaw = localStorage.getItem(LS.visited);
      const u = parseInt(localStorage.getItem(LS.unlocked) || '0', 10);
      if (vRaw) storedVisited = JSON.parse(vRaw);
      idx = isFinite(i) ? clamp(i) : 0;
      lastUnlocked = isFinite(u) ? clamp(u) : 0;
    } catch { }
    if (!Array.isArray(storedVisited) || storedVisited.length !== totalLessons) {
      visited = Array(totalLessons).fill(false);
    } else {
      visited = storedVisited.slice(0, totalLessons);
    }
    if (lastUnlocked < 0) lastUnlocked = 0;
  }

  function setProgress() {
    if (!totalLessons) return;
    const completed = visited.filter(Boolean).length;
    const pct = (completed / totalLessons) * 100;
    barFill.style.width = pct.toFixed(1) + '%';
    progressText.textContent = `${completed}/${totalLessons}`;
  }

  function buildSidebar() {
    const data = getConteudos();
    if (!data.length) return;
    topicsList.innerHTML = '';
    data.forEach((c, i) => {
      const li = document.createElement('li');
      li.className = 'topic';
      const btn = document.createElement('button');
      btn.type = 'button';
      const isVisited = visited[i];
      const isLocked = i > lastUnlocked && i !== idx;
      const icon = document.createElement('span');
      icon.className = 'material-symbols-rounded icon';

      if (i === idx) {
        icon.textContent = 'play_circle';
        icon.style.color = 'var(--brand)';
      } else if (isVisited) {
        icon.textContent = 'check_circle';
        icon.classList.add('badge-done');
      } else if (isLocked) {
        icon.textContent = 'lock';
      } else {
        icon.textContent = 'bookmark';
      }

      const box = document.createElement('div');
      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = c.titulo;
      const small = document.createElement('small');
      small.textContent = isVisited ? (currentLang === 'pt' ? 'Concluído' : 'Completed') : '';
      box.appendChild(title);
      box.appendChild(small);
      btn.appendChild(icon);
      btn.appendChild(box);

      if (i === idx) btn.classList.add('active');
      if (isLocked) btn.classList.add('locked');

      btn.addEventListener('click', () => {
        if (i > lastUnlocked && i !== idx) return;
        goTo(i);
      });
      li.appendChild(btn);
      topicsList.appendChild(li);
    });
  }

  function updateGateUI(disabled, remaining) {
    const t = STRINGS[currentLang];
    currentGateDisabled = disabled;
    currentGateRemaining = remaining;

    nextBtn.disabled = disabled;

    if (isLastLesson()) {
      const label = disabled ? `${t.nextFinish} • ${remaining}s` : t.nextFinish;
      nextLabel.innerHTML = `<span class="material-symbols-rounded">emoji_events</span>${label}`;
      gateHint.textContent = disabled
        ? t.hintLockedFinish(remaining)
        : t.hintUnlockedFinish;
    } else {
      const label = disabled ? `${t.nextAdvance} • ${remaining}s` : t.nextAdvance;
      nextLabel.innerHTML = `<span class="material-symbols-rounded">play_arrow</span>${label}`;
      gateHint.textContent = disabled
        ? t.hintLockedAdvance(remaining)
        : t.hintUnlockedAdvance;
    }
    gateHint.style.visibility = 'visible';
  }

  function resetGateAndStartCountdown() {
    if (gateTimer) {
      clearInterval(gateTimer);
      gateTimer = null;
    }
    let remaining = requiredSeconds;
    updateGateUI(true, remaining);
    gateTimer = setInterval(() => {
      remaining -= 1;
      if (remaining > 0) {
        updateGateUI(true, remaining);
      } else {
        clearInterval(gateTimer);
        gateTimer = null;
        visited[idx] = true;
        if (lastUnlocked < idx + 1 && idx + 1 < totalLessons) {
          lastUnlocked = idx + 1;
        }
        saveState();
        buildSidebar();
        setProgress();
        updateGateUI(false, 0);
      }
    }, 1000);
  }

  function render(i) {
    if (!totalLessons) return;
    if (gateTimer) {
      clearInterval(gateTimer);
      gateTimer = null;
    }
    const data = getConteudos();
    if (!data.length) return;

    idx = clamp(i);
    const item = data[idx];

    titleEl.textContent = item.titulo;
    metaEl.textContent = currentLang === 'pt'
      ? `Módulo ${idx + 1} de ${totalLessons}`
      : `Module ${idx + 1} of ${totalLessons}`;
    contentEl.innerHTML = item.conteudo;
    contentEl.scrollTop = 0;

    setProgress();
    prevBtn.disabled = (idx === 0);

    const alreadyVisited = visited[idx] === true;
    if (alreadyVisited) {
      updateGateUI(false, 0);
    } else {
      resetGateAndStartCountdown();
    }

    buildSidebar();
    if (location.hash !== `#${idx + 1}`) {
      history.replaceState(null, '', `#${idx + 1}`);
    }
  }

  function goTo(i) {
    idx = clamp(i);
    saveState();
    render(idx);
  }

  function openCompletionModal() {
    updateCompletionTexts();
    completionModal.classList.add('visible');
  }

  function closeCompletionModal() {
    completionModal.classList.remove('visible');
  }

  function updateIntroButtonLabel() {
    const t = STRINGS[currentLang];
    if (!introCanClose) {
      introStartBtn.textContent = t.introStartWait(introRemaining);
      introStartBtn.disabled = true;
    } else {
      introStartBtn.textContent = t.introStartReady;
      introStartBtn.disabled = false;
    }
  }

  function updateIntroTexts() {
    const t = STRINGS[currentLang];
    introTitleEl.textContent = t.introTitle;
    introBodyEl.innerHTML = t.introBody;
    updateIntroButtonLabel();
  }

  function updateCompletionTexts() {
    const t = STRINGS[currentLang];
    completionTitleEl.textContent = t.completionTitle;
    completionBodyEl.innerHTML = t.completionBody;
  }

  function openIntroModal(withDelay) {
    introModal.classList.add('visible');

    if (introTimer) {
      clearInterval(introTimer);
      introTimer = null;
    }

    const t = STRINGS[currentLang];

    if (withDelay) {
      introCanClose = false;
      introRemaining = INTRO_REQUIRED_SECONDS;
      introTitleEl.textContent = t.introTitle;
      introBodyEl.innerHTML = t.introBody;
      updateIntroButtonLabel();
      introTimer = setInterval(() => {
        introRemaining -= 1;
        if (introRemaining > 0) {
          updateIntroButtonLabel();
        } else {
          clearInterval(introTimer);
          introTimer = null;
          introCanClose = true;
          updateIntroButtonLabel();
        }
      }, 1000);
    } else {
      introCanClose = true;
      introRemaining = 0;
      introTitleEl.textContent = t.introTitle;
      introBodyEl.innerHTML = t.introBody;
      updateIntroButtonLabel();
    }
  }

  function closeIntroModal() {
    introModal.classList.remove('visible');
    if (introTimer) {
      clearInterval(introTimer);
      introTimer = null;
    }
    try {
      localStorage.setItem(LS.introSeen, '1');
    } catch { }
  }

  prevBtn.addEventListener('click', () => goTo(idx - 1));

  nextBtn.addEventListener('click', () => {
    if (!nextBtn.disabled) {
      visited[idx] = true;
      if (lastUnlocked < idx + 1 && idx + 1 < totalLessons) {
        lastUnlocked = idx + 1;
      }
      saveState();
      setProgress();
      if (isLastLesson()) {
        openCompletionModal();
        return;
      }
      goTo(idx + 1);
    }
  });

  closeModalBtn.addEventListener('click', closeCompletionModal);
  completionModal.addEventListener('click', (e) => {
    if (e.target === completionModal) {
      closeCompletionModal();
    }
  });

  introStartBtn.addEventListener('click', () => {
    if (!introCanClose) return;
    closeIntroModal();
  });

  aboutBtn.addEventListener('click', () => {
    openIntroModal(false);
  });

  document.addEventListener('keydown', e => {
    if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) return;
    if (e.key === 'ArrowLeft') {
      e.preventDefault();
      if (!prevBtn.disabled) goTo(idx - 1);
    }
    if (e.key === 'ArrowRight') {
      e.preventDefault();
      if (!nextBtn.disabled) {
        visited[idx] = true;
        if (lastUnlocked < idx + 1 && idx + 1 < totalLessons) {
          lastUnlocked = idx + 1;
        }
        saveState();
        setProgress();
        if (isLastLesson()) {
          openCompletionModal();
          return;
        }
        goTo(idx + 1);
      }
    }
  });

  function updateStaticLangUI() {
    const t = STRINGS[currentLang];
    aboutLabel.textContent = t.aboutButton;
    document.title = t.pageTitle;
    metaEl.textContent = t.metaNav;
    modulesLabelEl.textContent = t.modulesLabel;
    prevLabelEl.textContent = t.prevLabel;
    footerGithubLabelEl.textContent = t.footerGithubLabel;
    footerLinkedinLabelEl.textContent = t.footerLinkedinLabel;
    keyboardHintEl.textContent = t.keyboardHint;
    updateGateUI(currentGateDisabled, currentGateRemaining);
    updateIntroTexts();
    updateCompletionTexts();
  }

  langButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const lang = btn.dataset.lang;
      if (lang === currentLang) return;
      currentLang = lang;
      langButtons.forEach(b => b.classList.toggle('active', b.dataset.lang === lang));
      updateStaticLangUI();
      render(idx);
    });
  });

  function indexFromHash() {
    const n = parseInt((location.hash || '').replace('#', ''), 10);
    return isFinite(n) && n >= 1 && n <= totalLessons ? (n - 1) : null;
  }

  function maybeShowIntro() {
    let seen = null;
    try {
      seen = localStorage.getItem(LS.introSeen);
    } catch { }
    if (seen === '1') return;
    openIntroModal(true);
  }

  function init() {
    totalLessons = conteudos.pt ? conteudos.pt.length : 0;
    if (!totalLessons) {
      titleEl.textContent = 'Erro ao carregar conteúdo';
      metaEl.textContent = 'Verifique se os arquivos JSON estão na mesma pasta.';
      return;
    }
    loadState();
    updateStaticLangUI();
    let byHash = indexFromHash();
    if (byHash != null && byHash <= lastUnlocked) {
      idx = byHash;
    } else if (byHash != null && byHash > lastUnlocked) {
      idx = lastUnlocked;
    }
    render(idx);
    maybeShowIntro();
  }

  function loadContent() {
    Promise.all([
      fetch('prompt_trilha_pt.json').then(r => r.json()),
      fetch('prompt_trilha_en.json').then(r => r.json())
    ]).then(([pt, en]) => {
      conteudos.pt = pt;
      conteudos.en = en;
      init();
    }).catch(err => {
      console.error(err);
      titleEl.textContent = 'Erro ao carregar conteúdo';
      metaEl.textContent = 'Falha ao buscar os arquivos JSON.';
    });
  }

  loadContent();
</script>
</body>
</html>
